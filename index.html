<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Oppa | Core Tasker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #0f172a; color: #e2e8f0; font-family: sans-serif; }
        .cube-checkbox {
            width: 22px; height: 22px; border: 2px solid #475569;
            cursor: pointer; position: relative; flex-shrink: 0;
        }
        .cube-checkbox.checked { background-color: #10b981; border-color: #10b981; }
        .cube-checkbox.checked::after {
            content: 'L'; transform: scaleX(-1) rotate(-45deg);
            color: white; position: absolute; top: 1px; left: 5px; font-size: 14px;
        }
        .calendar-day { min-height: 60px; border: 1px solid #1e293b; background: #1e293b; cursor: pointer; }
        .calendar-day.active { border: 2px solid #3b82f6; background: #0f172a; }
        .sub-task { margin-left: 20px; border-left: 1px solid #334155; padding-left: 10px; }
    </style>
</head>
<body class="p-4">
    <div class="max-w-md mx-auto">
        <header class="flex justify-between items-center mb-6 border-b border-slate-700 pb-4">
            <h1 class="text-2xl font-bold">Oppa <span class="text-blue-500 text-xs border border-blue-500 px-1 rounded">PRO</span></h1>
            <button onclick="addTask()" class="bg-blue-600 text-white px-4 py-1 rounded text-sm font-bold">+ TASK</button>
        </header>

        <div class="bg-slate-900 p-4 rounded-xl mb-6 shadow-lg border border-slate-800">
            <div id="monthLabel" class="text-center font-bold mb-3 text-slate-400">MARCH 2026</div>
            <div class="grid grid-cols-7 gap-1" id="calendarGrid"></div>
        </div>

        <div class="bg-slate-900 p-5 rounded-xl shadow-lg border border-slate-800">
            <h2 id="viewDate" class="text-lg font-bold mb-4 text-blue-400">Today's Goals</h2>
            <div id="taskList" class="space-y-4">
                </div>
        </div>
    </div>

    <script>
        let tasks = JSON.parse(localStorage.getItem('oppa_tasks')) || {};
        let selectedDate = new Date().toISOString().split('T')[0];

        function renderCalendar() {
            const grid = document.getElementById('calendarGrid');
            grid.innerHTML = '';
            for (let i = 1; i <= 31; i++) {
                const dateStr = `2026-03-${i.toString().padStart(2, '0')}`;
                const day = document.createElement('div');
                day.className = `calendar-day flex flex-col items-center justify-center rounded ${selectedDate === dateStr ? 'active' : ''}`;
                day.innerHTML = `<span class="text-xs font-bold">${i}</span>`;
                day.onclick = () => { selectedDate = dateStr; renderCalendar(); renderTasks(); };
                grid.appendChild(day);
            }
        }

        function renderTasks() {
            const list = document.getElementById('taskList');
            const dateTitle = document.getElementById('viewDate');
            dateTitle.innerText = `Tasks: ${selectedDate}`;
            list.innerHTML = '';
            
            const dayTasks = tasks[selectedDate] || [];
            dayTasks.forEach((task, index) => {
                const div = document.createElement('div');
                div.className = "flex items-start gap-3 p-2 bg-slate-800 rounded-lg";
                div.innerHTML = `
                    <div class="cube-checkbox ${task.done ? 'checked' : ''}" onclick="toggleTask(${index})"></div>
                    <div class="flex-grow">
                        <p class="text-sm ${task.done ? 'line-through text-slate-500' : ''}">${task.text}</p>
                    </div>
                    <button onclick="deleteTask(${index})" class="text-slate-600 text-xs">X</button>
                `;
                list.appendChild(div);
            });
        }

        function addTask() {
            const val = prompt("Enter Task (e.g. CA Audit Prep):");
            if (!val) return;
            if (!tasks[selectedDate]) tasks[selectedDate] = [];
            tasks[selectedDate].push({ text: val, done: false });
            save();
        }

        function toggleTask(index) {
            tasks[selectedDate][index].done = !tasks[selectedDate][index].done;
            save();
        }

        function deleteTask(index) {
            tasks[selectedDate].splice(index, 1);
            save();
        }

        function save() {
            localStorage.setItem('oppa_tasks', JSON.stringify(tasks));
            renderTasks();
        }

        renderCalendar();
        renderTasks();
    </script>
</body>
</html>
